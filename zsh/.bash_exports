# Homebrew
eval "$(/opt/homebrew/bin/brew shellenv)"

# User configuration
export LANG=en_US.UTF-8
export LC_ALL="en_US.UTF-8"
export EDITOR="nvim"
export CPPFLAGS=-I/opt/homebrew/opt/openssl/include
export LDFLAGS=-L/opt/homebrew/opt/openssl/lib
export PKG_CONFIG_PATH="/opt/homebrew/opt/openssl@3/lib/pkgconfig"

# OrbStack (docker, docker compose, orb) â€” use official shell init
[[ -f ~/.orbstack/shell/init.zsh ]] && source ~/.orbstack/shell/init.zsh

# Dotfiles bin directory
export PATH="$HOME/.dotfiles/bin:$PATH"

# Starship prompt
eval "$(starship init zsh)"

# Node env
eval "$(fnm env)"

# Direnv
eval "$(direnv hook zsh)"

# Fzf
source <(fzf --zsh 2>/dev/null)

# Ruby - rbenv
export RBENV_ROOT="$HOME/.rbenv"
export PATH="$RBENV_ROOT/bin:$PATH"
eval "$(rbenv init - zsh)"
# ruby-install Ruby 3.1.3 (e.g. for kamal) if present
[[ -d "$HOME/.rubies/ruby-3.1.3/bin" ]] && export PATH="$HOME/.rubies/ruby-3.1.3/bin:$PATH"

# tree-me auto-cd support
# tree-me auto-cd support
if command -v tree-me >/dev/null 2>&1; then
    source <(tree-me shellenv 2>/dev/null)
fi

# Terminal greeting
if command -v fortune >/dev/null 2>&1 && command -v cowsay >/dev/null 2>&1 && [ -z "$GREETING_SHOWN" ]; then
    fortune -n 320 -s | cowsay -f small
    export GREETING_SHOWN=1
fi
